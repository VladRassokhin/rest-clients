apply plugin: 'kotlin'
apply plugin: 'maven'
apply plugin: 'idea'
apply plugin: 'about'
apply plugin: 'duplicates'


defaultTasks 'clean', 'build', 'about', 'install'


sourceCompatibility  = 1.6
group                = 'com.github.goldin'


buildscript {
    repositories {
//        maven   { url "${ System.properties[ 'user.home' ] }/.m2/repository" }
        mavenRepo url: 'http://evgenyg.artifactoryonline.com/evgenyg/repo/'
    }
    dependencies { classpath "com.github.goldin.plugins:gradle:0.1.4-SNAPSHOT" }
}


repositories {
    mavenRepo url: 'http://evgenyg.artifactoryonline.com/evgenyg/repo/'
//    maven   { url "${ System.properties[ 'user.home' ] }/.m2/repository" }
}

about        { dumpDependencies = true }
duplicates   { configurations   = [ 'runtime' ]
               verbose          = true }


dependencies {
    compile 'org.jetbrains.kotlin:kotlin-runtime:0.1-SNAPSHOT',
            'org.jetbrains.kotlin:kotlin-stdlib:0.1-SNAPSHOT'
}

idea.project {
    jdkName = '1.6'
    ipr.withXml { provider -> provider.node.component.find { it.@name == 'VcsDirectoryMappings' }.mapping.@vcs = 'Git' }
}

idea.module {
    downloadSources = true
    downloadJavadoc = true
}


task wrapper( type: Wrapper ) { gradleVersion = '1.0' }


/*
task sourcesJar( type: Jar, dependsOn: classes ) {
    classifier = 'sources'
    from sourceSets.main.allSource
}

task kdocJar( type: Jar, dependsOn: kdoc ) {
     classifier = 'javadoc'
     from kdoc.destinationDir
}

artifacts {
     archives sourcesJar
     archives kdocJar
}
*/